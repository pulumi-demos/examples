C4Container
    title Container diagram for Simple Web Application

    Person(web_user, "Web User", "End user with HTTP access from allowed IP range")
    Person(admin_user, "Admin User", "System administrator with SSH access from allowed IP range")
    
    Container_Boundary(aws_vpc, "AWS VPC (myVpc) - 10.0.0.0/16") {
        Container_Boundary(public_subnet, "Public Subnet (myPublicSubnet) - 10.0.1.0/24") {
            Container(ec2_instance, "EC2 Instance", "t2.micro", "myInstance running Python SimpleHTTPServer on port 80")
        }
        
        Container(igw, "Internet Gateway", "AWS IGW", "Enables direct internet connectivity for VPC resources")
        Container(route_table, "Route Table", "AWS Route Table", "Routes all traffic to Internet Gateway")
        Container(security_group, "Security Group", "AWS SG", "Ingress HTTP/80 and SSH/22 from allowed IP ranges")
    }
    
    System_Ext(internet, "Internet", "Public internet infrastructure")
    System_Ext(blocked_traffic, "Blocked Traffic", "All other IP addresses denied access")
    
    Rel(web_user, internet, "HTTP requests", "Port 80")
    Rel(admin_user, internet, "SSH connections", "Port 22")
    Rel(internet, igw, "Filtered incoming traffic", "TCP")
    Rel(igw, route_table, "Route resolution", "Network routing")
    Rel(route_table, ec2_instance, "Traffic forwarding", "Subnet routing")
    Rel(ec2_instance, web_user, "HTML response", "HTTP/80")
    Rel(ec2_instance, admin_user, "SSH shell access", "SSH/22")
    Rel(security_group, ec2_instance, "IP-based protection", "Security rules")
    Rel(security_group, blocked_traffic, "Denies access", "All other IPs blocked")

    UpdateRelStyle(web_user, internet, $textColor="blue", $lineColor="blue")
    UpdateRelStyle(admin_user, internet, $textColor="purple", $lineColor="purple")
    UpdateRelStyle(ec2_instance, web_user, $textColor="green", $lineColor="green")
    UpdateRelStyle(ec2_instance, admin_user, $textColor="orange", $lineColor="orange")
    UpdateRelStyle(security_group, ec2_instance, $textColor="purple", $lineColor="purple")
    UpdateRelStyle(security_group, blocked_traffic, $textColor="red", $lineColor="red")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")